{% extends 'base.html' %}
{% load static %}

{% block title %}Admin Dashboard - LibNexa{% endblock %}

{% block header %}{% endblock %}
{% block footer %}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}" />
{% endblock %}

{% block content %}
<div class="dashboard-wrapper">
  <div class="header">
    <img src="{% static 'img/logo.png' %}" alt="Logo" />
    <h1>LibNexa</h1>
    <h2>ğŸ“– Admin Dashboard</h2>
    <div class="institute" id="institute">{{ institute_name|default:"Loading..." }}</div>
  </div>

  <div class="info-area">
    <div style="text-align: center;">
      <p>Welcome to the Admin Dashboard. You have comprehensive access to library management features including student and teacher management, book inventory, transactions, and reporting.</p>
    </div>
  </div>

  <div class="notification-container">
    <div class="notification-bar overdue-notification">
      <div style="display: flex; align-items: center; gap: 15px; flex: 1;">
        <div style="font-size: 2rem;">âš ï¸</div>
        <div>
          <div style="font-size: 1.1rem; font-weight: 600;">Overdue Books</div>
          <div style="font-size: 0.9rem;"><span id="overdue-count">0</span> books are currently overdue</div>
        </div>
      </div>
    </div>
    <div class="notification-bar quick-status-notification">
      <div style="display: flex; align-items: center; gap: 15px;">
        <div style="font-size: 2rem;">ğŸ“Š</div>
        <div>
          <div style="font-size: 1.1rem; font-weight: 600;">Quick Status</div>
          <div style="font-size: 0.9rem;">All operations running smoothly</div>
        </div>
      </div>
    </div>
  </div>

  <div style="display: flex; gap: 30px; align-items: flex-start; flex-wrap: wrap;">
    <div class="quick-actions-container" style="flex: 1; min-width: 300px;">
      <h2 style="margin-bottom: 20px;">âš¡ Quick Actions</h2>
      <div class="actions-grid">
        <div class="action-item">
          <button class="action-btn" onclick="viewBorrowRegister()">ğŸ“˜ Student Library Transactions</button>
          <p>Issue, return, and renew books for students with complete transaction tracking.</p>
        </div>
        <div class="action-item">
          <button class="action-btn" onclick="teacherregister()">ğŸ“— Teacher Library Transactions</button>
          <p>Manage book lending operations specifically for teachers and faculty members.</p>
        </div>
        <div class="action-item">
          <button class="action-btn" onclick="viewStudentDatabase()">ğŸ‘¨â€ğŸ“ Student Management</button>
          <p>Register, search, and manage student records with bulk import capabilities.</p>
        </div>
        <div class="action-item">
          <button class="action-btn" onclick="viewBookStock()">ğŸ“¦ Inventory Management</button>
          <p>Track book quantities, add new stock, assign unique Book IDs and generate inventory reports.</p>
        </div>
        <div class="action-item">
          <button class="action-btn" onclick="viewBookDatabase()">ğŸ“– Book Catalog</button>
          <p>Complete book catalog with detailed information and availability status.</p>
        </div>
        <div class="action-item">
          <button class="action-btn" onclick="viewteacherDatabase()">ğŸ‘¨â€ğŸ« Teacher Management</button>
          <p>Register and organize teacher records within the system database.</p>
        </div>
        <div class="action-item">
          <button class="action-btn" onclick="view_passedoutstudents()">ğŸ“ Alumni Directory</button>
          <p>Maintain records of graduated students with certificates and contact details.</p>
        </div>
        <div class="action-item">
          <button class="action-btn" onclick="cashbook()">ğŸ“’ Financial Ledger</button>
          <p>Track all financial transactions including credits, debits, and payment records.</p>
        </div>
        <div class="action-item">
          <button class="action-btn" onclick="BOOKRECOVERY()">ğŸ“š Recover from Student</button>
          <p>Record compensation for lost or damaged books before student clearance.</p>
        </div>
        <div class="action-item">
          <button class="action-btn" onclick="assignMissingBook()">ğŸ““ Assign Missing Book</button>
          <p>Track lost or damaged books and manage replacement procedures.</p>
        </div>
        <div class="action-item">
          <button class="action-btn" onclick="setting()">âš™ï¸ Settings</button>
          <p>Configure system preferences and customize application behavior.</p>
        </div>
      </div>
    </div>

    <div style="display: flex; flex-direction: column; gap: 20px; width: 350px; flex-shrink: 0;">
      <div id="overdue-board">
        <h2>ğŸ“Œ Overdue Book Reminders</h2>
        <ul id="overdue-list">
          <li>âœ… Loading...</li>
        </ul>
      </div>

      <div class="quick-stats-container">
        <h2>ğŸ“Š Quick Statistics</h2>
        <div class="stats-grid">
          <div class="stat-item">
            <div class="stat-icon">ğŸ“š</div>
            <div>
              <div class="stat-number" id="total-books">...</div>
              <div class="stat-label">Total Books</div>
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-icon">ğŸ‘¨â€ğŸ“</div>
            <div>
              <div class="stat-number" id="total-students">...</div>
              <div class="stat-label">Total Students</div>
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-icon">ğŸ‘¨â€ğŸ«</div>
            <div>
              <div class="stat-number" id="total-teachers">...</div>
              <div class="stat-label">Total Teachers</div>
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-icon">ğŸ“–</div>
            <div>
              <div class="stat-number" id="books-issued">...</div>
              <div class="stat-label">Books Issued</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/dashboard.js' %}"></script>
{% endblock %}