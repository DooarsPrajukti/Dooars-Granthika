{% comment %} {% extends 'base.html' %} {% endcomment %}
{% load static %}

{% comment %} {% block title %}Admin Dashboard - Dooars Granthika{% endblock %} {% endcomment %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/dashboards/admin_dashboard.css' %}" />
{% endblock %}

{% block content %}
<div class="dashboard-wrapper">

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="logo-container">
        <img src="{% static 'assets/img/logo2.png' %}" alt="Logo" >
      </div>
      <h3 class="logo-text">Dooars Granthika</h3>
    </div>

    <nav class="sidebar-nav">
      <a href="#" class="nav-item active">
        <span class="nav-icon">ğŸ“Š</span>
        <span class="nav-text">Dashboard</span>
      </a>
      <a href="#" class="nav-item">
        <span class="nav-icon">ğŸ›ï¸</span>
        <span class="nav-text">Libraries</span>
      </a>
      <a href="#" class="nav-item">
        <span class="nav-icon">ğŸ“š</span>
        <span class="nav-text">Books</span>
      </a>
      <a href="#" class="nav-item">
        <span class="nav-icon">ğŸ‘¥</span>
        <span class="nav-text">Members</span>
      </a>
      <a href="#" class="nav-item">
        <span class="nav-icon">ğŸ“–</span>
        <span class="nav-text">Transactions</span>
      </a>
      <a href="#" class="nav-item">
        <span class="nav-icon">ğŸ“ˆ</span>
        <span class="nav-text">Reports</span>
      </a>
      <a href="#" class="nav-item">
        <span class="nav-icon">âš™ï¸</span>
        <span class="nav-text">Settings</span>
      </a>
    </nav>

    <div class="sidebar-footer">
      <a href="#" class="nav-item logout">
        <span class="nav-icon">ğŸšª</span>
        <span class="nav-text">Logout</span>
      </a>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main-content">

    <!-- Top Bar -->
    <header class="top-bar">
      <div class="page-title">
        <h1>Admin Dashboard</h1>
        <p class="subtitle">Welcome back, Administrator</p>
      </div>
      <div class="top-bar-actions">
        <button class="btn-icon" title="Notifications">
          <span class="notification-badge">3</span>
          ğŸ””
        </button>
        <div class="user-profile">
          <img src="{% static 'assets/img/default-avatar.png' %}" alt="Admin" class="user-avatar">
          <div class="user-info">
            <span class="user-name">Admin</span>
            <span class="user-role">Administrator</span>
          </div>
        </div>
      </div>
    </header>

    <!-- Stats Cards -->
    <section class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon blue">ğŸ›ï¸</div>
        <div class="stat-content">
          <h3 class="stat-value">{{ total_libraries|default:"0" }}</h3>
          <p class="stat-label">Total Libraries</p>
          {% if libraries_change %}
          <span class="stat-change {{ libraries_change_class }}">{{ libraries_change }}</span>
          {% endif %}
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon green">ğŸ“š</div>
        <div class="stat-content">
          <h3 class="stat-value">{{ total_books|default:"0" }}</h3>
          <p class="stat-label">Total Books</p>
          {% if books_change %}
          <span class="stat-change {{ books_change_class }}">{{ books_change }}</span>
          {% endif %}
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon purple">ğŸ‘¥</div>
        <div class="stat-content">
          <h3 class="stat-value">{{ total_members|default:"0" }}</h3>
          <p class="stat-label">Active Members</p>
          {% if members_change %}
          <span class="stat-change {{ members_change_class }}">{{ members_change }}</span>
          {% endif %}
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon orange">ğŸ“–</div>
        <div class="stat-content">
          <h3 class="stat-value">{{ active_transactions|default:"0" }}</h3>
          <p class="stat-label">Active Loans</p>
          {% if transactions_change %}
          <span class="stat-change {{ transactions_change_class }}">{{ transactions_change }}</span>
          {% endif %}
        </div>
      </div>
    </section>

    <!-- Charts & Tables Row -->
    <section class="dashboard-row">
      
      <!-- Recent Libraries -->
      <div class="card">
        <div class="card-header">
          <h2 class="card-title">Recent Libraries</h2>
          <a href="#" class="card-action">View All â†’</a>
        </div>
        <div class="card-body">
          <table class="data-table">
            <thead>
              <tr>
                <th>Library Name</th>
                <th>Institute</th>
                <th>Location</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              {% for library in recent_libraries %}
              <tr>
                <td>{{ library.name }}</td>
                <td>{{ library.institute_name }}</td>
                <td>{{ library.district }}, {{ library.state }}</td>
                <td><span class="badge {{ library.status_class }}">{{ library.status }}</span></td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="4" class="empty-state">No libraries registered yet</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>

      <!-- Activity Feed -->
      <div class="card">
        <div class="card-header">
          <h2 class="card-title">Recent Activity</h2>
          <a href="#" class="card-action">View All â†’</a>
        </div>
        <div class="card-body">
          <div class="activity-feed">
            {% for activity in recent_activities %}
            <div class="activity-item">
              <div class="activity-icon {{ activity.icon_class }}">{{ activity.icon }}</div>
              <div class="activity-content">
                <p class="activity-text"><strong>{{ activity.title }}</strong></p>
                <p class="activity-detail">{{ activity.description }}</p>
                <span class="activity-time">{{ activity.timestamp }}</span>
              </div>
            </div>
            {% empty %}
            <p class="empty-state">No recent activity</p>
            {% endfor %}
          </div>
        </div>
      </div>

    </section>

    <!-- Quick Actions -->
    <section class="quick-actions">
      <h2 class="section-title">Quick Actions</h2>
      <div class="actions-grid">
        <button class="action-btn">
          <span class="action-icon">â•</span>
          <span class="action-text">Add Library</span>
        </button>
        <button class="action-btn">
          <span class="action-icon">ğŸ“š</span>
          <span class="action-text">Add Books</span>
        </button>
        <button class="action-btn">
          <span class="action-icon">ğŸ‘¤</span>
          <span class="action-text">Add Member</span>
        </button>
        <button class="action-btn">
          <span class="action-icon">ğŸ“Š</span>
          <span class="action-text">Generate Report</span>
        </button>
      </div>
    </section>

  </main>

</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/dashboard/admin_dashboard.js' %}"></script>
{% endblock %}